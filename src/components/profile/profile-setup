import { useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useNavigate } from 'react-router-dom';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function ProfileSetup() {
  const { user, updateProfile } = useAuth();
  const navigate = useNavigate();
  const [name, setName] = useState(user?.name || '');
  const [phone, setPhone] = useState(user?.phone || '');
  const [bio, setBio] = useState(user?.bio || '');

  const handleSave = async () => {
    await updateProfile({
      name,
      phone,
      bio,
      profileComplete: true, // âœ… mark as complete
    });

    // Redirect to dashboard
    const dashboardRoute = `/dashboard/${user?.role}`; // adjust if needed
    navigate(dashboardRoute);
  };

  return (
    <div className="max-w-xl mx-auto mt-10 space-y-4">
      <h1 className="text-2xl font-bold">Complete Your Profile</h1>
      <Input value={name} onChange={e => setName(e.target.value)} placeholder="Full Name" />
      <Input value={phone} onChange={e => setPhone(e.target.value)} placeholder="Phone Number" />
      <Input value={bio} onChange={e => setBio(e.target.value)} placeholder="Short Bio" />
      <Button onClick={handleSave}>Save Profile</Button>
    </div>
  );
}
